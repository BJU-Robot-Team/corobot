#include <QGraphicsScene>
#include <QPainter>
#include <QStyleOption>
#include <ctime>
#include "ImageBig.h"

/**
 * transform a Qimage in a QGraphicsItem  
 * This image is made to be a 640*480 image to view the camera stream on the gui
 */
ImageBig::ImageBig()
{
}

QRectF ImageBig::boundingRect() const
{
    qreal adjust = 2;
    return QRectF(0, 0, 640 + adjust, 480 + adjust);
}

void ImageBig::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *)
{

    painter->drawImage(0,0,image);
}

void ImageBig::setImage(QImage& image)
//set the QImage
{
   this->image = image;
}

void ImageBig::saveImage() 
// save a picture of the current image stream on the hardrive. The date and time is given in the file name
{
    QString path;
    time_t t = time(0);   // get time now
    struct tm * now = localtime(&t);
    cout << (now->tm_year + 1900) << '-' 
         << (now->tm_mon + 1) << '-'
         <<  now->tm_mday
         << endl;
    path ="../picture-" + QString::number(now->tm_year + 1900) + "-" + QString::number(now->tm_mon + 1) "-" + QString::numbe(now->tm_mday) + ".jpg";

    this->image.save(path,"JPG");

}


